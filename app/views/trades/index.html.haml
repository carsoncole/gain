%h1 Trades

%table.table
  %thead
    %tr
      %th Date
      %th
      %th Security
      %th Price
      %th Qty
      %th Amount
      %th Qty Bal
      %th Cost Bal
      %th Qty Tax Bal
      %th Cur Cost Bal

      %th

  %tbody
    - @trades.each do |trade|
      %tr
        %td= trade.date
        %td= trade.trade_type
        %td= trade.security.name
        %td= number_to_currency(trade.price)
        %td= number_with_delimiter(trade.quantity, precision: 2)
        %td= number_to_currency(trade.amount)
        %td= number_with_delimiter(trade.quantity_balance, precision: 2)
        %td= number_to_currency(trade.cost_balance)
        %td= number_with_delimiter(trade.quantity_balance, precision: 2)
        %td= number_to_currency(trade.current_cost_balance,precision: 2)
        %td.text-end
          = link_to account_trade_path(@account, trade) do
            %i.bi.bi-eye
          = link_to edit_account_trade_path(@account, trade) do
            %i.bi.bi-pencil
          = link_to account_trade_path(@account, trade), method: :delete, data: { "turbo-method": :delete, "turbo-confirm": 'Are you sure?' } do
            %i.bi.bi-trash


= pagy_bootstrap_nav(@pagy).html_safe if @pagy.pages > 1
%br

= link_to new_account_trade_path(@account), id: "new-trade-link" do
  %i.bi.bi-plus-lg
