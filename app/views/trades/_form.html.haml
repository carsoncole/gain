

= form_for [@account, @trade] do |f|
  - if @trade.errors.any?
    #error_explanation
      %h2= "#{pluralize(@trade.errors.count, "error")} prohibited this trade from being saved:"
      %ul
        - @trade.errors.full_messages.each do |message|
          %li= message

  .mb-3
    = f.label :security, class: 'form-label'
    = f.collection_select :security_id, Security.order(:name), :id, :name, {}, class: 'form-select'
  .mb-3
    = f.label :trade_type, class: 'form-label'
    = f.select :trade_type, options_for_select(Trade::TYPES, f.object.trade_type), { }, class: 'form-select'
  .mb-3
    = f.label :price, class: 'form-label'
    = f.text_field :price, class: 'form-control'
  .mb-3
    = f.label :quantity, class: 'form-label'
    = f.text_field :quantity, class: 'form-control'

  .mb-5
    = f.submit class: 'btn btn-primary'

  .mb-3
    = f.label :date, class: 'form-label'
    = f.date_field :date, class: 'form-control'
  .mb-3
    = f.label :fee, class: 'form-label'
    = f.text_field :fee, class: 'form-control'
  .mb-3
    = f.label :other, class: 'form-label'
    = f.text_field :other, class: 'form-control'
  .mb-3
    = f.label :amount, class: 'form-label'
    = f.text_field :amount, class: 'form-control'
  .mb-3
    = f.label :note, class: 'form-label'
    = f.text_field :note, class: 'form-control'

  .mb-5
    = f.submit class: 'btn btn-primary'

  .mb-3
    = f.label :split_new_shares, class: 'form-label'
    = f.text_field :split_new_shares, class: 'form-control'
  .mb-3
    = f.label :conversion_to_security, class: 'form-label'
    = f.collection_select :conversion_to_security_id, Security.order(:name), :id, :name, { include_blank: true }, class: 'form-select'
  .mb-3
    = f.label :conversion_to_quantity, class: 'form-label'
    = f.text_field :conversion_to_quantity, class: 'form-control'
  .mb-3
    = f.label :conversion_from_quantity, class: 'form-label'
    = f.text_field :conversion_from_quantity, class: 'form-control'
